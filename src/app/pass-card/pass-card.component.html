<p-growl [(value)]="msgs" life="6000"></p-growl>

<p-card [(title)]="title" styleClass="ui-card-shadow" [subtitle]="subtitle" class = "card">
  <div *ngIf="forTeacher && !isPending;" class="element">
    Status: <div [ngClass]="{'revoked': pass.revoked, 'active': !pass.revoked}">{{status}}</div>
  </div>
  <div *ngIf="forTeacher;" class="element">
    For: {{studentsAsString}}
  </div>
  <div *ngIf="!!pass.from_location; else noFrom" class="element">
      {{pass.from_location.name}}({{pass.from_location.room}}) → {{pass.to_location.name}}({{pass.to_location.room}})<br>
  </div>
  <ng-template #noFrom>
     <div class="element"> →  {{pass.to_location.name}}({{pass.to_location.room}})</div> 
  </ng-template>
  <div *ngIf="timeLeft > 0 && !pass.revoked;" class="element">
    Time Left: {{timeLeftStr}}
  </div>
  <div class="element">
      Duration: {{duration}} minutes<br>
  </div>
  <div *ngIf="forTeacher;" class="element">
    Issued by: {{pass.issuer.display_name}}<br>
  </div>
  <p-footer>
    <div *ngIf="showActivate; else infoButton;">
      <button pButton type="button" label="Activate" [icon]="getIcon()"
      [ngClass]="{'ui-button-success': passAvailable(), 'ui-button-danger': !passAvailable()}" [disabled]="available"
              (click)="activate()">
      </button>
      <p-confirmDialog appendTo="body"></p-confirmDialog>
      <p-dialog header="Activate Pass" [(visible)]="activateVisible">
          <app-activate-pass [pass]="pass" (activatePassEvent)="activatePassUpdate($event)"></app-activate-pass>
      </p-dialog>
    </div>
    <ng-template #infoButton>
      <button pButton type="button" label="More Info"
              icon="fa-info" (click)="getInfo()"></button>
      <p-dialog header="Pass Info" [(visible)]="infoVisible">
          <app-pass-info (updatePassEvent)="updatePassUpdate($event)" [pass]="pass" [forTeacher]="forTeacher" [isPending]="isPending" [isExpired]="isExpired"></app-pass-info>
      </p-dialog>
    </ng-template>
  </p-footer>
</p-card>
