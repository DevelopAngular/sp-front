<div class="card-container" ondragstart="return false">
    <app-pass-card-template
            [hasDivider]="(forStaff || forMonitor || (!forStaff && !isActive)) && !forInput"
            [selectedStudents]="selectedStudents"
            [forStaff]="forStaff"
            [pass]="pass"
            [rightJustify]="(fromPast || forFuture)?'center':'flex-end'"
            [closeIcon]="(((isActive && forStaff) || forMonitor)?'./assets/Three dots (Transparent).png':'./assets/'+(forInput?'Back Button ': 'Trash ') + '(Transparent).png')"
            [hasClose]="hasClose"
            (onCancel)="cancelEdit($event)">

      <div class="card-subtitle" *ngIf="fromPast || forFuture">
        {{ formatDateTime(pass.start_time) }}
      </div>

      <div *ngIf="forInput; else noInput" class="card-body-left">
        <app-duration-picker [forStaff]="forStaff" [plural]="selectedStudents.length>1" (onChange)="selectedDuration=$event" [maxDuration]="pass.destination.max_allowed_time?pass.destination.max_allowed_time:15"></app-duration-picker>
        <app-traveltype-picker (onSelect)="selectedTravelType=$event" [choices]="pass.destination.travel_types" [altColor]="pass.color_profile.solid_color"></app-traveltype-picker>
      </div>
        <ng-template class="card-body-left" #noInput>
          <app-travel-view [pass]="pass"></app-travel-view>
        </ng-template>
      <div class="card-body-right" *ngIf="!forStaff; else staffPanel">
        <div *ngIf="forInput; else studentNoInput" class="card-body-right">
          <app-card-button (onClick)="newPass()" [disabled]="performingAction" [disabled]="performingAction" [width]="buttonWidth +'px'" [height]="'81px'" [gradientColor]="pass.color_profile.gradient_color">
            <div class="start-pass-content">
              <div class="start-pass-content-text">{{((forFuture && forInput)?'Schedule Pass':(forStaff?'Send Pass':'Start Pass'))}}</div>
              <img class="button-icon-right" [src]="'./assets/Arrow (White).png' | resolveAsset">
            </div>
          </app-card-button>
        </div>
        <ng-template #studentNoInput class="card-body-right">
          <div *ngIf="isActive" class="card-body-right">
            <app-card-button *ngIf="!(forStaff || forMonitor)" [disabled]="performingAction" [width]="buttonWidth +'px'" [height]="'81px'"  [gradientColor]="pass.color_profile.gradient_color" [overlayWidth]="overlayWidth" [valid]="valid">
              <div class="end-pass-content">
                {{ timeLeft +(timeLeft===''?'':' -')}} End Pass
              </div>
            </app-card-button>
          </div>
          <div *ngIf="fromPast || forFuture && !forInput" class="card-body-right">
            <span style="font-weight: bold">{{ forFuture?'Pass Auto Starts': getDuration() +' - Total Time' }}</span>
          </div>
        </ng-template>
      </div>
      <ng-template #staffPanel class="card-body-right">
        <div *ngIf="forInput; else staffNoInput" class="card-body-right">
          <app-card-button (onClick)="newPass()" [disabled]="performingAction" [width]="buttonWidth +'px'" [height]="'81px'" [gradientColor]="pass.color_profile.gradient_color">
            <div class="start-pass-content">
              <div class="start-pass-content-text">{{((forFuture && forInput)?'Schedule Pass' +(selectedStudents.length>1?'es':''):(forStaff?'Send Pass' +(selectedStudents.length>1?'es':''):'Start Pass' +(selectedStudents.length>1?'es':'')))}}</div>
              <img class="button-icon-right" [src]="'./assets/Arrow (White).png' | resolveAsset">
            </div>
          </app-card-button>
        </div>
        <ng-template #staffNoInput class="card-body-right">
          <div style="display: flex">

            <div class="card-body-right">
              <app-pager [pages]="pagerPages" [page]="pagerPages">
                <div class="page-1 teacher-details">
                  <span class="bold">{{ (activePage==1?(timeLeft +(timeLeft===''?'':' - ')):'') +p1Title }}</span><span class="smaller"><br>{{ p1Subtitle }} - {{ p1Stamp }}</span>
                </div>
                <div class="page-2 teacher-details">
                  <span class="bold">{{ (activePage==2?(timeLeft +(timeLeft===''?'':' - ')):'') +p2Title }}</span><span class="smaller"><br>{{ p2Subtitle }}  {{ p2Stamp }}</span>
                </div>
                <div class="page-3 teacher-details">
                  <span class="bold">{{ (activePage==3?(timeLeft +(timeLeft===''?'':' - ')):'') +p3Title }}</span><span class="smaller"><br>{{ p3Subtitle }}  {{ p3Stamp }}</span>
                </div>
                <div class="page-4 teacher-details">
                  <span class="bold">{{ (activePage==4?(timeLeft +(timeLeft===''?'':' - ')):'') +p4Title }}</span><span class="smaller"><br>{{ p4Subtitle }}  {{ p4Stamp }}</span>
                </div>
              </app-pager>
            </div>
          </div>
        </ng-template>
      </ng-template>
    </app-pass-card-template>
</div>