<div class="data-table-wrapper"
     [style.width]="width"
     [style.height]="height"
     [style.overflow]="(height=='none' ? 'none': 'auto')">

  <table mat-table matSort [dataSource]="dataSource" [style.background-color]="backgroundColor">

    <!-- Checkbox Column -->
    <ng-container matColumnDef="select" *ngIf="isCheckbox">
      <th mat-header-cell *matHeaderCellDef class="sticky-header">
        <mat-checkbox (change)="$event ? masterToggle() : null; pushOutSelected()"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()">
        </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row">
        <!--<pre style="font-size: 10px">{{row | json}}</pre>-->
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(row) : null; pushOutSelected()"
                      [checked]="selection.isSelected(row)">
        </mat-checkbox>
      </td>
    </ng-container>

    <!-- Columns -->
    <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="sticky-header"
          [style.color]="textHeaderColor" [style.text-transform]="'none'"
      > {{column}} </th>
      <td mat-cell *matCellDef="let element" [style.color]="textColor">
        <ng-container *ngIf="normalizeCell(element[column]).length; else empty">
          <span *ngFor="let cellElement of normalizeCell(element[column]); let i = index">
            <span *ngIf="normalizeCell(element[column]).length > 1 && i > 0">, </span>
            <span [ngClass]="{'multi-cell': cellElement.title}" (click)="selectedCellEmit($event, cellElement, element)">
              {{displayCell(cellElement)}}
            </span>
          </span>
        </ng-container>
        <ng-template #empty>
          <span *ngIf="column === 'Rooms'; else withoutProfile" style="cursor: not-allowed; color: #AAAAAA;">
            Not Assigned Anywhere
          </span>
          <ng-template #withoutProfile>
            <span style="cursor: not-allowed; color: #AAAAAA;">Without Profile</span>
          </ng-template>
        </ng-template>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay" style="height: 38px"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"
        (click)="selectedRowEmit(row)" style="height: 38px;">
    </tr>
  </table>
</div>
