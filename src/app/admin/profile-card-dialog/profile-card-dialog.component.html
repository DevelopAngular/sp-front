<div class="profile-card-dialog-container">
  <!-- Disables card when some async stuffs occur-->
  <div class="disabled-state loading-theme spinner" *ngIf="disabledState">
    <mat-spinner [diameter]="'150'" [color]="'accent'"></mat-spinner>
  </div>
  <!-- end -->
  <div class="card-header">
    <div class="back-button ds-flex-center-center" (click)="back()">
      <img [src]="'./assets/Back Button (Blue-White).svg'" alt="Back Button (Blue-White).svg" *ngIf="!permissionsFormEditState">
      <span *ngIf="permissionsFormEditState">Cancel</span>
    </div>
    <div class="ds-flex-center-center ds-dialog-title">
      <img class="role-icon"  [ngClass]="{'gsuite': this.layout === 'gSuiteSettings'}"  [src]="headerIcon" alt="header-icon">
      <span>{{headerText}}</span>
    </div>
    <div *ngIf="permissionsFormEditState" class="save-button">
      <app-gradient-button
        [minHeight]="'27px'"
        [width]="'72px'"
        [fontSize]="'11px'"
        [fontWeight]="'bold'"
        [cursor]="'pointer'"
        (buttonClick)="updateProfilePermissions()"
      >
        Save
      </app-gradient-button>
    </div>
  </div>

  <ng-container [ngSwitch]="layout">

    <div class="content-scrollable-box" *ngSwitchCase="'bulkPermissions'">
      <div class="card-body">

        <div class="card-body_section" *ngIf="data.role === '_profile_teacher' || data.role === '_profile_admin'">
          <div class="section-content">
            <div [style.width]="'100%'">
              <div class="ds-dialog-heading">Bulk Permissions</div>
              <div *ngFor="let control of controlsIteratable">
                <app-toggle-input
                  [form]="permissionsForm"
                  [delimiter]="false"
                  [controlName]="control.controlName"
                  [controlLabel]="control.controlLabel"
                  [controlSize]="'small'"
                ></app-toggle-input>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="content-scrollable-box" *ngSwitchCase="'viewProfile'">
      <div class="card-body">
        <div class="card-body_section">
          <div class="section-content">
            <div>
              <div class="ds-dialog-heading">Account Info</div>
              <span class="ds-dialog-bold-text">Name: </span> <span>{{profile['Name']}}</span><br>
              <span class="ds-dialog-bold-text">Email: </span> <span>{{profile['Email/Username']}}</span><br>
              <span class="ds-dialog-bold-text">Account Type: </span> <span>{{profile['Account Type']}}</span><br>
            </div>
            <div [style.text-align]="'right'">
              <div>
                <img [src]="'./assets/google/google_logo.svg'" alt="google_logo.svg">
              </div>
              <div class="learn-more ds-small-link-text">
                <span>Learn more</span>
              </div>
            </div>
          </div>
          <div *ngIf="data.role === '_profile_assistant' && secretaryOrSubstitute">
            <div class="active-on-behalf-user ds-w-100 ds-my-15">
              <div class="ds-mb-5" [ngClass]="{'ds-dialog-heading': secretaryOrSubstitute.behalfOf, 'ds-dialog-heading-gray': !secretaryOrSubstitute.behalfOf}">Active on Behalf Of</div>
              <!--<div class="profile-search" *ngIf="!secretaryOrSubstitute.behalfOf; else secretaryBehalfOf" >-->
                <!--<app-student-search-->
                  <!--[placeholder]="'Search existing teachers'"-->
                  <!--[type]="'alternative'"-->
                  <!--[role]="'_profile_teacher'"-->
                  <!--(onUpdate)="secretaryOrSubstitute.behalfOf = $event[0]"-->
                <!--&gt;</app-student-search>-->
              <!--</div>-->
              <!--<ng-template #secretaryBehalfOf>-->
                <!--<div class="ds-flex-center-start">-->
                  <!--<div class="ds-flex-center-between" *ngFor="let chip of secretaryOrSubstitute.behalfOf; let i = index">-->
                    <!--<div class="user"-->
                         <!--(mouseenter)="chip.hovered = true;"-->
                         <!--(mouseleave)="chip.hovered = false;">-->
                      <!--<span>{{chip.user.display_name}}</span>-->
                      <!--<div style="width: 15px; height: 15px; cursor: pointer; margin-left: 10px;">-->
                        <!--<img *ngIf="chip.hovered"-->
                             <!--(click)="secretaryOrSubstitute.behalfOf.splice(i, 1)"-->
                             <!--[src]="'./assets/Cancel (Blue-Gray).svg'" width="15" alt="Check.svg">-->
                      <!--</div>-->
                    <!--</div>-->
                  <!--</div>-->
                <!--</div>-->
              <!--</ng-template>-->
              <app-sp-chips [selectedProfiles]="secretaryOrSubstitute.behalfOf"></app-sp-chips>
            </div>
          </div>
        </div>
        <div class="card-body_section" *ngIf="data.role === '_profile_teacher'">
          <div class="section-content">
            <div>
              <div class="ds-dialog-heading">Rooms</div>
              <div>

                <div style="display: inline">
                  <span class="ds-dialog-bold-text">Assigned to: </span>
                </div>
                <div style="display: inline" class="room-link" *ngFor="let loc of teacherAssignedTo; let i = index" (click)="goToPassConfig(loc)">
                  <span *ngIf="i > 0">,</span> <span> {{loc.title}}</span>
                </div>
                <div style="display: inline">
                  <span *ngIf="!teacherAssignedTo.length"> &mdash; </span>
                </div>


              </div>
            </div>
            <div [style.padding-left]="'10px'">
              <app-gradient-button
                [size]="'small'"
                [width]="'141px'"
                [minHeight]="'52px'"
                [gradient]="'#FFFFFF,#FFFFFF'"
                [hoverColor]="'#FFFFFF'"
                [textColor]="'#1F195E'"
                [fontSize]="'13px'"
                [cursor]="'pointer'"
                (buttonClick)="goToPassConfig()"

              >
                <div class="search-button">
                  <span>Go to Pass <br> Configuration</span><img width="16px" height="16px" [src]="'./assets/External Link (Navy).svg'" alt="Object.svg">
                </div>
              </app-gradient-button>
            </div>
          </div>
        </div>

        <div class="card-body_section">
          <div class="section-content">
            <div [style.padding-right]="'10px'">
              <div class="ds-dialog-heading">Activity</div>
              <span class="ds-dialog-bold-text">Sign-in status: </span> <span>{{profile['Sign-in status']}}</span><br>
              <span class="ds-dialog-bold-text">Last sign-in: </span> <span>{{profile['Last sign-in']}}</span><br>
            </div>
            <div *ngIf="data.role !== '_profile_admin'">
              <app-gradient-button
                [size]="'small'"
                [width]="'141px'"
                [minHeight]="'35px'"
                [gradient]="'#FFFFFF,#FFFFFF'"
                [hoverColor]="'#FFFFFF'"
                [textColor]="'#1F195E'"
                [fontSize]="'13px'"
                [cursor]="'pointer'"
                (buttonClick)="goToSearch()"

              >
                <div class="search-button">
                  <span style="">Go to search</span><img width="16px" height="16px" [src]="'./assets/External Link (Navy).svg'" alt="">
                </div>
              </app-gradient-button>
            </div>
          </div>
        </div>
        <div class="card-body_section" *ngIf="data.role === '_profile_teacher' || data.role === '_profile_admin'">
          <div class="section-content">
            <div [style.width]="'100%'">
              <div class="ds-dialog-heading">Permissions</div>
              <div *ngFor="let control of controlsIteratable">
                <app-toggle-input
                  [form]="permissionsForm"
                  [delimiter]="false"
                  [controlName]="control.controlName"
                  [controlLabel]="control.controlLabel"
                  [controlSize]="'small'"
                  [disabled]="control.disabled"

                ></app-toggle-input>
              </div>
            </div>
          </div>
        </div>


      </div>
      <div style="flex: 1 1 132px; display: flex; min-height: 132px;">
        <div class="card-footer">
          <div class="button" *ngIf="profile._originalUserProfile.active">
            <app-gradient-button
              [gradient]="'#001115,#033294'"
              [hoverColor]="'#001115'"
              [textColor]="'#FFFFFF'"
              [cursor]="'pointer'"
              (buttonClick)="promptConfirmation($event.target, 'disable_sign_in')"
            >
              <span>Disable sign-in</span>
            </app-gradient-button>
            <div class="button_message">
              <span>Message</span>
            </div>
          </div>
          <div class="button" *ngIf="!profile._originalUserProfile.active">
            <app-gradient-button
              [textColor]="'#FFFFFF'"
              [cursor]="'pointer'"
              (buttonClick)="promptConfirmation($event.target, 'enable_sign_in')"
            >
              <span>Enable sign-in</span>
            </app-gradient-button>
            <div class="button_message">
              <span>Message</span>
            </div>
          </div>
          <div class="button">
            <div>
              <app-gradient-button
                [gradient]="'#DA2370, #FB434A'"
                [hoverColor]="'#DA2370'"
                [textColor]="'#FFFFFF'"
                (buttonClick)="promptConfirmation($event.target, 'delete_from_profile')"
              >
                <span>Remove from Profile</span>
              </app-gradient-button>
            </div>
            <div class="button_message">
              <span>Message</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="content-scrollable-box" *ngSwitchCase="'gSuiteSettings'">
      <div class="card-body">

        <div class=" ds-my-20 ds-mx-25">
          <div class="ds-dialog-heading">Last Sync: Today, 9:34 AM</div>
        </div>

        <div class="ds-border-box ds-px-25 ds-py-10">
          <div class="ds-flex-start-between section-content">
            <div>

              <div class="ds-w-100 ds-flex-wrap ds-dialog-bold-text">
                Manually Sync User Details
              </div>
              <p class="ds-mr-10">Update your imported users' details in G Suite - we'll sync these changes for you on our end every 4 hours or manually sync here.</p>
            </div>
            <div>
              <app-gradient-button
              [size]="'small'"
              [whiteSpace]="'nowrap'"
              [gradient]="'#13BF9E, #00D99B'"
              [hoverColor]="'#13BF9E'"
              [cursor]="'pointer'"
              >
                Manually Sync
              </app-gradient-button>
            </div>

          </div>

        </div>
        <div class="ds-border-box ds-px-25 ds-py-10">
          <div class="ds-flex-start-between section-content">
            <div>
              <div class="ds-w-100 ds-flex-wrap ds-dialog-bold-text">Organization Unit Routing</div>
              <p class="ds-mr-10">Organizational units through G Suite can be routed to certain SmartPass profiles (Students, Administrators, etc.)</p>
            </div>
            <div>
              <app-gradient-button
                [size]="'small'"
                [whiteSpace]="'nowrap'"
                [gradient]="'#001115,#033294'"
                [hoverColor]="'#001115'"
                [rightIcon]="'./assets/Chevron Right (White).svg'"
                [cursor]="'pointer'"
              >
                Edit Routing
              </app-gradient-button>
            </div>
          </div>
        </div>

      </div>
    </div>

  </ng-container>
  <!--<pre>{{profile | json}}</pre>-->
</div>
