<form [formGroup]="form"
      (dragenter)="handleDragEvent($event, '#00B476')"
      (dragover)="handleDragEvent($event, '#00B476')"
      (dragleave)="handleDragEvent($event, '#7F879D')"
      (drop)="catchFile($event)"
>
<div class="wrapper">
  <div class="header" [ngStyle]="{'background-image': gradientColor}">
    <div class="left-button">
      <img class="back-button" draggable="false"
           *ngIf="!showCancelButton && !disabledRightBlock"
           alt="Go Back"
           [src]="'./assets/' + (titleColor === 'white' ? 'Back Button (Light-Gray).svg' : 'Back Button (Blue-White).svg') | resolveAsset"
           (click)="back()"
      >
      <div class="cancel-button" [style.color]="titleColor" *ngIf="showCancelButton" (click)="back()">Cancel</div>
    </div>

    <div class="title" [style.color]="titleColor">
      <img draggable="false" class="title-icon" *ngIf="titleIcon" [src]="titleIcon | resolveAsset">
      {{ roomTitle }}
    </div>

    <div class="right-button">
      <app-gradient-button *ngIf="showPublishButton"
                           [minHeight]="'40px'"
                           [style.width]="'120px'"
                           [gradient]="!color_profile || currentPage === 9 ? '#00B476, #00B476' : '#FFFFFF, #FFFFFF'"
                           [textColor]="color_profile ? color_profile.solid_color : 'White'"
                           [cursor]="'pointer'"
                           [fontSize]="'14px'"
                           (buttonClick)="onPublish()"
        >{{ (showPublishSpinner ? null : 'Save') }}
        <mat-spinner *ngIf="showPublishSpinner" [color]="'accent'" [diameter]="30"></mat-spinner>
      </app-gradient-button>

      <div *ngIf="showIncompleteButton" [style.color]="titleColor">Incomplete</div>

    </div>
  </div>

  <div class="content">
    <div class="left-block">
      <div class="block" *ngIf="currentPage === 1 || currentPage === 2">
        <app-room [form]="form" [passLimitForm]="passLimitForm" [showErrors]="showErrors" (roomDataResult)="roomResult($event)"></app-room>
      </div>
      <div class="block" *ngIf="currentPage === 3 || currentPage === 4">
        <app-folder [form]="form" (folderDataResult)="folderResult($event)"></app-folder>
      </div>

      <div class="block" *ngIf="currentPage === 5">
        <app-new-room-in-folder [form]="form" (add)="newRoomInFolder($event)" (back)="back(false)"></app-new-room-in-folder>
      </div>

      <div class="block" *ngIf="currentPage === 6">
        <app-edit-room-in-folder (deleteRoom)="deleteRoomInFolder($event)" [form]="form" (save)="editRoomFolder($event)" (back)="back(false)"></app-edit-room-in-folder>
      </div>

      <div class="block" *ngIf="currentPage === 8">
        <div class="existing-rooms">
          <app-add-existing-room
                  [data]="pinnables$ | async"
                  [roomName]="folderData.folderName"
                  [roomsInFolder]="folderData.selectedRoomsInFolder"
                  (back)="back(false);"
                  (save)="addToFolder($event)">
          </app-add-existing-room>
        </div>
      </div>

      <div class="block" *ngIf="currentPage === 9">
        <app-bulk-edit-rooms (bulkEditResult)="bulkEditResult($event)" [form]="form"></app-bulk-edit-rooms>
      </div>

      <div class="block" *ngIf="currentPage === 10">
        <app-bulk-edit-rooms-in-folder [form]="form" (bulkEditResult)="bulkEditInFolder($event)" (back)="back(false)"></app-bulk-edit-rooms-in-folder>
      </div>


      <div class="block" *ngIf="currentPage === 7">
        <app-import-rooms [form]="form" (back)="back(false)"></app-import-rooms>
      </div>
    </div>

    <mat-divider [vertical]="true"></mat-divider>

    <div class="right-block">
      <div class="right-content">
        <div class="appearance-content" *ngIf="currentPage !== 9">
          <div class="inactive" *ngIf="disabledRightBlock"></div>
          <div class="right-content-title" [ngStyle]="{'color':  color_profile && selectedIcon ? '#1F195E' : '#8e8e93' }">Appearance</div>
          <div class="color-picker">
            <app-color-pallet-picker [selectedColorProfile]="color_profile" [showError]="showErrors" (selectedEvent)="changeColor($event)"></app-color-pallet-picker>
          </div>
          <div class="icon-picker">
            <app-icon-picker
              [roomName]="roomData?.roomName || folderData?.folderName"
              [icons$]="icons$"
              [selectedIconPicker]="selectedIcon"
              [changeTextResult]="iconTextResult$"
              [showError]="showErrors"
              (selectedEvent)="changeIcon($event)"
            ></app-icon-picker>
          </div>
        </div>

        <div class="edit-right-content" *ngIf="currentPage === 9">
          <div class="edit-right-title">Rooms Editing</div>
          <div class="selected-rooms">
            <div class="selected-room" *ngFor="let room of selectedRooms">
              <app-pinnable [disabled]="true" [pinnable]="room" [forStaff]="true"></app-pinnable>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</form>
