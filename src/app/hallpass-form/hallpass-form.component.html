<p-growl [(value)]="msgs" life="3000"></p-growl>

<div *ngIf="isStaff; else studentForm;" [style.display]="getDisplay()">
  <div class="teacherPass">
    <h1 class="title">Hall Pass</h1>

    <div class="formElement">
      <app-student-search></app-student-search>
    </div>

    <div class="formElement">
      When is this pass for?<br>
      <p-inputSwitch onLabel="Later" offLabel="Now" [(ngModel)]="isPending"></p-inputSwitch>
    </div>

    <div *ngIf="isPending; else notPendingLocations;">
      <div class="formElement halfForm">
        <app-teacher-search type="'to'"></app-teacher-search>
      </div>
    </div>
    <ng-template #notPendingLocations>
      <div class="formElement">
        <app-teacher-search class="to" type="'to'"></app-teacher-search>
        <app-teacher-search class="from" type="'from'"></app-teacher-search>
      </div>
    </ng-template>

    <div *ngIf="isPending; else notPendingDateTime;">
      <div class="formElement">
        <div class="date">
          <app-date-time type="'date'"></app-date-time>
        </div>

        <div class="time">
          <app-date-time type="'time'"></app-date-time>
        </div>
      </div>
    </div>
    <ng-template #notPendingDateTime></ng-template>
    <div class="formElement">
      <div class="duration">
        <app-duration-picker></app-duration-picker>
      </div>

      <div class="submit">
        <p-button (onClick)="newPass()" icon="fa fa-fw fa-check" label="Issue Pass"></p-button>
      </div>
    </div>
  </div>
</div>

<ng-template #studentForm>
  <div class="form">
    <div class="divider"></div>
    <div class="center">
      <button mat-button class="clickRipple from" (click)="chooseLoc('from')">
        <div class="card" [style.background]="getGradient('from')">
          <div>
            <img *ngIf="!!fromIcon" class="icon" [src]="fromIcon">
            <div class="title">
              {{from_title}}
            </div>
          </div>
        </div>
      </button>

      <img class="midIcon" src="../../assets/icons8-lock_filled.png" alt="ICON">
      <img class="midIcon" src="../../assets/icons8-lock_filled.png" alt="ICON">

      <button mat-button class="clickRipple to" (click)="chooseLoc('to')">
        <div class="card" [style.background]="getGradient('to')">
          <div>
            <img *ngIf="!!toIcon" class="icon" [src]="toIcon">
            <div class="title">
              {{to_title}}
            </div>
          </div>
        </div>
      </button>
    </div>
    <div class="divider"></div>
    <mat-grid-list *ngIf="formState == 'to'" class="grid" cols="4" rowHeight="75px" gutterSize="15px">
      <mat-grid-tile *ngFor="let pinnable of pinnables | async">
        <app-pinnable [pinnable]="pinnable" (onSelectEvent)="pinnableSelected($event)"></app-pinnable>
      </mat-grid-tile>
    </mat-grid-list>
    <div *ngIf="formState == 'fields'">
      <div *ngIf="!toLocation.restricted; else restrictedFields;">
        Non-Restricted Fields
      </div>
      <ng-template #restrictedFields>
        Restricted Fields
      </ng-template>
      
    </div>
  </div>
  <!-- <div class="studentPass">
    <h1 class="title">Hall Pass</h1>
    <div class="hallPassColumn">

      <div class="formElement">
        <app-teacher-search class="" type="'to'"></app-teacher-search>
      </div>

      <div class="formElement">
          <app-teacher-search class="" type="'from'"></app-teacher-search>
      </div>

      <div class="formElement">
        <div class="duration">
          <app-duration-picker></app-duration-picker>
        </div>
        <div class="submit">
          <p-button (onClick)="newPass()" icon="fa fa-fw fa-check" label="Create Pass"></p-button>
        </div>
      </div>
    </div>

    <div class="quickPassColumn">
      <div class="qpFormElement">
        <app-quickpass-picker (quickPassEvent)="quickPassUpdate($event)"></app-quickpass-picker>
      </div>
    </div>
    
  </div> -->
</ng-template>