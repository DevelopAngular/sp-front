<div class="wrapper">
  <app-round-input
    [style.margin]="'20px' "
    [minWidth]="'20px auto 5px auto'"
    [width]="inputWidth"
    [type]="'text'"
    [placeholder]="placeholder"
    [fieldIconPosition]="'left'"
    [closeIcon]="true"
    [focused]="isFocused"
    [isSearch]="true"
    [backgroundColor]="!screenService.isDeviceLargeExtra ? '#FFFFFF' : '#F4F4F4'"
    (ontextupdate)="onSearch($event)"
  ></app-round-input>
  <div class="main-content" *ngIf=" type === 'location' ? ( mainContentVisibility && favoritesLoaded ) : mainContentVisibility ">

    <div *ngIf="type==='location' && showFavorites && !hideFavorites" class="table-left">
      <div class="fav-header" *ngIf="!forKioskMode">
        Favorites
      </div>
      <mat-divider class="divider" *ngIf="!forKioskMode"></mat-divider>

      <!-- Favorite Window -->
      <div class="favorite" *ngIf="favoritesLoaded && isFavoriteForm && !forKioskMode && pinnablesLoaded">
        <div
             class="choices"
             [dragula]="(screenService.enabledLocationTableDnD | async) ? 'locations' : null"
             (dragulaModelChange)="updateOrderLocation($event)"
        >
          <div class="choice" *ngFor="let choice of starredChoices">
            <app-location-cell
              (onSelect)="choiceSelected($event)"
              (onStar)="star($event)"
              [value]="choice"
              [type]="type"
              [starred]="true"
              [showStar]="!!showStars"
              [allowOnStar]="allowOnStar"
            >
            </app-location-cell>
          </div>
        </div>
        <ng-template #noDnd>
          <div class="choices">
            <div class="choice" *ngFor="let choice of starredChoices">
              <app-location-cell
                (onSelect)="choiceSelected($event)"
                (onStar)="star($event)"
                [value]="choice"
                [type]="type"
                [starred]="true"
                [showStar]="!!showStars"
                [allowOnStar]="allowOnStar"
              >
              </app-location-cell>
            </div>
          </div>
        </ng-template>
      </div>


      <!-- Create Pass Form -->
      <div *ngIf="favoritesLoaded && !isFavoriteForm && !forKioskMode && pinnablesLoaded"
           class="choices">
        <div class="choice" *ngFor="let choice of starredChoices">
          <app-location-cell
            (onSelect)="choiceSelected($event)"
            (onStar)="star($event)"
            [value]="normalizeLocations(choice)"
            [type]="type"
            [hasLocks]="hasLocks"
            [forLater]="forLater"
            [forStaff]="forStaff"
            [starred]="true"
            [showStar]="!!showStars"
            [allowOnStar]="allowOnStar"
            [valid]="isValidLocation(choice)"
          >
          </app-location-cell>
        </div>
      </div>

      <div *ngIf="starredChoices.length < 1 && !forKioskMode" class="no-favs" ondragstart="return false">
        <img class="star-icon" [src]="'./assets/Star (Yellow).svg'">
        <div>
          <span class="ds-dialog-bold-text ds-pb-5">No Favorite Rooms</span> <br>
          <span class="ds-cell-description-text">Add favorites {{ !isFavoriteForm ? 'in settings' : '' }}</span>
        </div>
      </div>
      <div *ngIf="rightHeaderText && !hideFavorites" [style.margin-top]="forKioskMode ? '' : '25px'" class="fav-header">All Rooms</div>
      <mat-divider class="divider"></mat-divider>
    </div>
    <div class="table-right" [style.margin]="'0 ' +(showFavorites?'0':'auto')" *ngIf="choices && !noChoices && pinnablesLoaded">
      <div class="quick-label" *ngIf="staticChoices?.length && !search">Quick Select</div>
      <div class="choices">
        <div
          class="choice-wrapper"
          *ngFor="let choice of choices"
          #item
        >
          <app-location-cell
            class="choice"
            [hasLocks]="hasLocks"
            [forLater]="forLater"
            [forStaff]="forStaff"
            [showStar]="showStars && !noRightStar"
            [starred]="isSelected(choice)"
            (onSelect)="choiceSelected($event)"
            (onStar)="star($event)"
            [allowOnStar]="allowOnStar"
            [value]="normalizeLocations(choice)"
            [type]="type"
            [valid]="isValidLocation(choice)"
          >
          </app-location-cell>
        </div>
      </div>
    </div>
    <div *ngIf="(loaded$ | async) && noChoices">
      <div>
        <img [src]="'./assets/emptyStates/undraw_people_search_wctu.svg'" width="150" [style.margin]="'20px'" alt="undraw_people_search_wctu.svg">
      </div>
      <div style="color: #999999; font-size: 20px;"><span>{{dummyString}}</span></div>
    </div>
  </div>
</div>
