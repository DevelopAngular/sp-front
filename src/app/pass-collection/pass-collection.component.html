<div class="collection-wrapper" *ngIf="!mock && ((currentPasses$ | async) && (currentPasses$ | async).length > 0) || showEmptyHeader; else emptyMessage">
  <div class="collection-header" [style.width]="headerWidth">
    <div class="collection-title">
      <img draggable="false" class="collection-icon" [src]="_icon | resolveAsset">
      <div class="collection-title" [style.color]="_color">
        {{title}}
      </div>
    </div>
    <ng-container *ngIf="currentPasses$ | async as passes">
      <div class="search" *ngIf="searchPanel && (passes.length || !!search)">
        <app-round-input
          [isSearch]="true"
          [placeholder]="'Search ' + (randomObject$ | async)"
          [focused]="true"
          (ontextupdate)="search = $event; searchValue.emit($event)"
        ></app-round-input>
      </div>
    </ng-container>

      <div class="filter-button"
         *ngIf="hasFilterPasses"
         appCrossPointerEventTarget
         (pointerClickEvent)="openFilter($event)"
      >
        <div class="icon" *ngIf="!selectedSort || selectedSort === 'all_time'; else sort">
          <img width="15" draggable="false" [src]="'./assets/Filter (Blue-Gray).svg' | resolveAsset" alt="Filter">
        </div>
        <ng-template #sort>
          <div class="selected-button" *ngIf="!!selectedSort">
            <img width="15" draggable="false" [src]="'./assets/Filter (Navy).svg' | resolveAsset" alt="Filter">
            <div class="selected-title">{{ selectedText }}</div>
          </div>
        </ng-template>

      </div>
      <div class="sort-label global-opacity-icons" *ngIf="hasSort" (click)="openSortDialog($event)">
        <app-icon-button [srcString]="'Hall Monitor Sort'" [size]="20" (clickEvent)="openSortDialog($event)"></app-icon-button>
      </div>
  </div>
  <div *ngIf="(currentPasses$ | async) as currentPasses">
    <div *ngIf="currentPasses.length > 0; else emptyMessage">
      <div class="collection-grid-wrapper" [style.gridTemplateColumns]="gridTemplate" [style.gridGap]="gridGap" *ngIf="displayState==='grid'; else list">
        <div class="tile" *ngFor="let pass of currentPasses">
          <app-pass-tile
           (tileSelected)="showPass($event)"
           [timerEvent]="timerEvent"
           [fromPast]="fromPast"
           [forFuture]="forFuture"
           [isActive]="isActive"
           [forStaff]="forStaff"
           [pass]="pass"
           [allowPopup]="true"
           [profileImage]="showProfilePictures"
           [isEnableProfilePictures]="(isEnabledProfilePictures$ | async) && !!user.show_profile_pictures"
          ></app-pass-tile>
        </div>
      </div>
      <ng-template #list>
        <div class="collection-list-wrapper" [style.max-height]="maxHeight?maxHeight:''">
          <app-pass-cell *ngFor="let pass of currentPasses" (click)="showPass(pass)" [timerEvent]="timerEvent" [fromPast]="fromPast" [forFuture]="forFuture" [isActive]="isActive" [forStaff]="forStaff" [pass]="pass"></app-pass-cell>
        </div>
      </ng-template>
</div>

<ng-template #emptyMessage>
  <div class="empty-state" *ngIf="hasFilterPasses && showEmptyHeader">
    <img width="80" height="80" [src]="'./assets/Empty filter (Blue-Gray).svg' | resolveAsset" alt="Filter Empty">
    <div class="empty-message" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white: '#7F879D'})">
      No expired passes <br/>
      <span *ngIf="selectedText !== 'Today'">in the </span><span style="text-transform: lowercase">{{ selectedText }}</span>
    </div>
  </div>
</ng-template>

<!-- Needs for Intro page -->

<!--<div class="collection-wrapper" *ngIf="mock" [style.width]=" columns === 3 ? '393px' : columns === 2 ? '322px' : 'auto'">-->
<div class="collection-wrapper" *ngIf="mock">
  <div class="collection-header">
    <img draggable="false" class="collection-icon" [src]="icon | resolveAsset">
    <div class="collection-title">
      {{title}}
    </div>
    <img draggable="false" class="collection-display-toggle global-opacity-icons" [src]="'./assets/' +(displayState==='grid'?'List':'Grid') +' (Navy).svg'| resolveAsset" [style.margin-left]="hasSort?'10px':'auto'">
  </div>
  <div class="collection-divider"></div>
    <div class="collection-grid-wrapper" *ngIf="displayState==='grid'; else list">
      <div class="tile" *ngFor="let mockTile of mock">
        <app-pass-tile [mock]="mockTile" [forStaff]="forStaff"></app-pass-tile>
      </div>
    </div>
    <ng-template #list>
      <div class="collection-list-wrapper" [style.max-height]="maxHeight?maxHeight:''">
        <app-pass-cell *ngFor="let mockCell of mock" [forStaff]="forStaff" [mock]="mockCell"></app-pass-cell>
      </div>
    </ng-template>
</div>
  </div>
<!--  <div *ngIf="showBottomShadow" class="bottom-shadow"></div>-->
</div>
<!-- End -->

