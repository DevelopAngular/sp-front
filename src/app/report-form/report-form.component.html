<div class="report-form-wrapper">
  <div class="divider">

    <img [ngClass]=" isIOSTablet ? 'ios-back-button' : 'back-button'" [src]="'./assets/Back Button (White).svg' | resolveAsset" (click)="back()">

    <div *ngIf="showOptions" [@NextStep]="{ value: '', params: frameMotion$ | async}">
      <div class="divider-text-students ds-dialog-title-white" [attr.data-motion-translate]="true">Report Student</div>
    </div>
    <div *ngIf="!showOptions" [@NextStep]="{ value: '', params: frameMotion$ | async}">
      <div class="divider-text-message ds-dialog-title-white" [attr.data-motion-translate]="true">Report Student</div>
    </div>
  </div>
  <div style="position: relative; flex: 1 1 auto; display: flex; flex-direction: column; justify-content: space-between; background-color: white">

    <div style="display: flex; flex-direction: column; flex: 1 1 auto" *ngIf="showOptions" [@NextStep]="{ value: '', params: frameMotion$ | async}">
      <div class="student-select" [attr.data-motion-translate]="true">
        <div class="report-content">

          <app-sp-search
            [selectedOptions]="selectedStudents"
            [showOptions]="showOptions"
            (onUpdate)="selectedStudents=$event"
            (click)="showOptions=true">
          </app-sp-search>

        </div>
        <div [ngClass]=" isIOSTablet ? 'ios-button-next ' : 'student-select_button-next'" *ngIf="showOptions && selectedStudents && selectedStudents.length > 0">
          <app-gradient-button
            [gradient]="'#E32C66, #E32C66'"
            [cursor]="'pointer'"
            [hoverColor]="'#E32C66'"
            [minWidth]="'104px'"
            [minHeight]="'35px'"
            [fontSize]="'16px'"
            (buttonClick)="nextStep()"
          >Next ({{ selectedStudents.length }})</app-gradient-button>
        </div>

      </div>
    </div>

    <div style="display: flex; flex-direction: column; flex: 1 1 auto;" *ngIf="!showOptions"  [@NextStep]="{ value: '', params: frameMotion$ | async}">

      <div class="message-entry" [attr.data-motion-translate]="true">
        <div data-grammarly-issue-container class="message-wrapper">
          <textarea class="message-box" #messageBox placeholder="Attach a message" [(ngModel)]="reportMessage">{{ reportMessage }}</textarea>
        </div>
        <app-gradient-button
          [gradient]="'#E32C66, #E32C66'"
          [cursor]="'pointer'"
          [hoverColor]="'#E32C66'"
          [minWidth]="'104px'"
          [minHeight]="'35px'"
          [fontSize]="'16px'"
          [leftIcon]="'./assets/Report (White).svg' | resolveAsset"
          (buttonClick)="sendReport()"
        >Report Student<span *ngIf="selectedStudents.length > 1">s</span></app-gradient-button>
      </div>
    </div>
  </div>
</div>
