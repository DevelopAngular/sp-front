<div class="step-1-container">
  <div class="header">
    <div class="header_back-button" (click)="back()">
      <img  *ngIf="!form.get('title').value && !selectedStudents.length"
            class=""
            [src]="'./assets/Combined Shape.svg' | resolveAsset">
      <span class="header_back-button"
            *ngIf="form.get('title').value || selectedStudents.length">Cancel</span>
    </div>
    <div class="header_title">
      <!--<img class="header_icon" [src]="'./assets/Search (Blue).png' | resolveAsset">-->
      <div class="header_text ds-dialog-title">New Student Group</div>
      <span  *ngIf="selectedStudents.length ">{{selectedStudents.length}} student<span *ngIf="selectedStudents.length > 1">s</span></span>
    </div>
    <div class="header_save">
      <div *ngIf="form.get('title').value && (selectedStudents.length)">
        <app-gradient-button
          [width]="'105px'"
          [minHeight]="'35px'"
          [fontSize]="'14px'"
          [cursor]="'pointer'"
          (buttonClick)="nextStep()"
        >Save</app-gradient-button>
      </div>

      <div *ngIf="(form.get('title').value || (selectedStudents.length)) && !(form.get('title').value && (selectedStudents.length))">
        <span [style.user-select]="'none'">Incomplete</span>
      </div>
    </div>
  </div>
  <div class="content">

    <div class="content-left">
      <div class="content-left_wrapper">
        <div>
          <div>

            <div class="ds-dialog-subtitle">Student Group Name</div>
            <app-input
              [controlName]="form.get('title')"
              [formGroup]="form"
              [padding]="'4px'"
              [width]="'200px'"
              [isFocus]="true"
            ></app-input>
          </div>
          <div class="content-left_upload">
            <div *ngIf="uploadedStudents" class="content-left_uploaded">
              <div style="font-weight: bold">
                <span>{{uploadedStudents.existingStudents.length}} </span><span>students added</span>
              </div>
              <div *ngIf="uploadedStudents.unknown.length">
                <div style="white-space: nowrap">
                  <span>{{uploadedStudents.unknown.length}} students not added, email error:</span>
                </div>
                <div *ngFor="let anonimus of uploadedStudents.unknown">
                  <span>{{anonimus}}</span>
                </div>
              </div>
            </div>
            <div *ngIf="!uploadedStudents">
              <app-gradient-button
                [gradient]="'#022F68,#2F66AB'"
                [hoverColor]="'#022F68'"
                [minHeight]="'35px'"
                [width]="'120px'"
                [fontSize]="'13px'"
                [cursor]="'pointer'"
                (buttonClick)="studentEmails.click(); loadingIndicator = true;"
              >
                <div *ngIf="loadingIndicator" class="loading-theme_white spinner flex-center-left pt">
                  <mat-spinner [color]="'white'" [diameter]="'25'"></mat-spinner>
                </div>
                <span *ngIf="!loadingIndicator" >
                Upload File
              </span>
              </app-gradient-button>
            </div>
            <input type="file" #studentEmails hidden>
          </div>
        </div>
        <div class="content-left_groups" *ngIf="!uploadedStudents">
          <div>
            <div class="content-left_placeholder">
              Upload an Exel spreadsheet of student <strong>email address</strong>
              to quickly select students.
            </div>
          </div>
        </div>

      </div>
    </div>


    <div class="content-right">
      <div class="content-right_sudent-search">
        <div class="seach-wrapper">
          <app-student-search
            (onUpdate)="selectedStudents=$event" [selectedStudents]="selectedStudents"
          ></app-student-search>
        </div>
      </div>

    </div>
  </div>
</div>
