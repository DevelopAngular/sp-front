<div [ngClass]="isIOSTablet ? 'ios-form' : 'form'"
     [style.width]="formSize.containerWidth"
     [style.height]="formSize.containerHeight">

<!--  <div class="white-background"-->
<!--       [style.width]="formSize.width"-->
<!--       [style.height]="formSize.height">-->
<!--  </div>-->

  <div *ngIf="FORM_STATE.step === 1"
       [ngClass]="isIOSTablet ? 'ios-fixed-card' : 'fixed-card'"
       [style.z-index]="1"
       [style.width]="formSize.width"
       [style.height]="formSize.height"
       [@NextStep]="{ value: '', params: frameMotion$ | async}"
       (@NextStep.start)="setFormSize();setContainerSize('end')"
       (@NextStep.done)="setContainerSize('start')">
    <div [attr.data-motion-compress]="'calendar:' + (frameMotion$ | async).direction"
         class="calendar"
    >
      <app-date-time-container [FORM_STATE]="FORM_STATE" (nextStepEvent)="onNextStep($event)" ></app-date-time-container>
    </div>
  </div>

  <div *ngIf="FORM_STATE.step === 2"
       [ngClass]="isIOSTablet ? 'ios-fixed-card' : 'fixed-card'"
       [style.z-index]="0"
       [style.width]="formSize.width"
       [style.height]="formSize.height"
       [@NextStep]="{ value: '', params: frameMotion$ | async}"
       (@NextStep.start)="setFormSize();setContainerSize('end')"
       (@NextStep.done)="setContainerSize('start')">
    <div [attr.data-motion-compress]="'students:' + (frameMotion$ | async).direction"
         [attr.data-motion-opacity]="(frameMotion$ | async).direction"
         class="student-groups"
    >
      <app-groups-container [FORM_STATE]="FORM_STATE" (nextStepEvent)="onNextStep($event)"></app-groups-container>
    </div>
  </div>

  <div *ngIf="FORM_STATE.step === 3"
       [ngClass]="isIOSTablet ? 'ios-fixed-card' : 'fixed-card'"
       [style.z-index]="1"
       [style.width]="formSize.width"
       [style.height]="formSize.height"
       [@NextStep]="{ value: '', params: frameMotion$ | async}"
       (@NextStep.start)="setFormSize();setContainerSize('end')"
       (@NextStep.done)="setContainerSize('start')">
    <div [attr.data-motion-compress]="'locations:' + (frameMotion$ | async).direction"
         [attr.data-motion-opacity]="(frameMotion$ | async).direction + 2"
         [attr.data-motion-scale]="(isScaled | async)"
         class="locations"
    >
      <app-locations-group-container [currentPassLimit]="passLimitsRemaining" [FORM_STATE]="FORM_STATE" (nextStepEvent)="onNextStep($event)"></app-locations-group-container>
    </div>
  </div>

  <div *ngIf="FORM_STATE.step === 4"
       [ngClass]="isIOSTablet ? 'ios-fixed-card' : 'fixed-card'"
       [style.width]="formSize.width"
       [style.height]="formSize.height"
       [attr.data-motion-scale]="true"
       [@NextStep]="{ value: '', params: frameMotion$ | async}"
       (@NextStep.start)="setFormSize();setContainerSize('end')"
       (@NextStep.done)="setContainerSize('start')">
    <app-form-factor-container [FORM_STATE]="FORM_STATE" [forStaff]="isStaff" (nextStepEvent)="onNextStep($event)"></app-form-factor-container>
  </div>

</div>

<div class="pass-limits-info" style="position:relative;" *ngIf="passLimitsLoaded">
  <p>{{passLimitsRemaining}}/{{passLimitsMax}} passes remaining today</p>
  <p style="margin-top: -8px; font-size: 12px" *ngIf="passLimitsRemaining === 0">You must request a pass from your teacher</p>

  <div class="pass-limits-counter-icon" [ngClass]="{'pass-limit-locked': passLimitsRemaining === 0, 'pass-limit-one-remaining': passLimitsRemaining === 1}">
    <span *ngIf="passLimitsRemaining > 0">{{passLimitsRemaining}}</span>
    <img style="width: 85%" *ngIf="passLimitsRemaining === 0" src="assets/Lock%20(White).svg">
  </div>
</div>

