<div class="host">

  <!--<div *ngIf="!(isProcess$ | async).active" class="static-loading" #staticLoading><div class="static-loading"></div></div>-->
  <!--<ng-progress [color]="'#04CD33'" [spinner]="false" [fixed]="true" [speed]="200" [thick]="true"></ng-progress>-->
  <div *ngIf="showNav && !isHallMonitorRoute && showNav && !isMyRoomRoute || showNav && !islargeDeviceWidth" class="bar">
    <div class="heading grow">
      <app-smartpass-logo></app-smartpass-logo>
    </div>
    <div class="nav-buttons-width" *ngIf="!hideButtons">
      <div *ngIf="isStaff && !user.isAssistant()" class="teacherNav">
        <div *ngFor="let button of buttons" class="teacherNav_tab">
          <ng-container *ngIf="hasRoles(button.requiredRoles)">
            <app-nav-button
              [selected]="tab === button.route"
              [content]="button.title"
              [icon]="button.imgUrl"
              (onClick)="updateTab(button.route)">
            </app-nav-button>
          </ng-container>
        </div>
      </div>

      <div *ngIf="user.isAssistant() && effectiveUser?.roles" class="teacherNav">
        <!--{{buttons.length}}-->
        <div *ngFor="let button of buttons" class="teacherNav_tab">
          <ng-container *ngIf="buttonVisibility(button)">
            <app-nav-button
              [selected]="tab === button.route"
              [content]="button.title"
              [icon]="button.imgUrl"
              (onClick)="updateTab(button.route)">
            </app-nav-button>
          </ng-container>
        </div>
      </div>
    </div>
    <div class="user-info">
      <div class="ds-mx-10" style="cursor: pointer;" *ngIf="user.isAssistant(); else notAssistant" #target (click)="showTeaches(target)">
        <div class="acting-behalf" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white : '#7F879D'})">Acting on Behalf Of:</div>
        <div class="name" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white : '#7F879D'})">
          <span>
            {{ effectiveUser?.user.display_name }}
          </span>
          <img width="10" class="ds-ml-5" [src]="getIcon('Chevron Down', 'White', 'Navy')" alt="Chevron Down.svg">
        </div>
      </div>
      <ng-template #notAssistant>
        <div class="name" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white : '#7F879D'})">
          <span>
            {{ user?user.display_name:'' }}
          </span>
        </div>
      </ng-template>

      <div *ngIf="user && islargeDeviceWidth" class="inbox-wrapper" (click)="inboxClick()"
           [style.background-color]="(inboxVisibility && !islargeDeviceWidth?'#E4EBFF':'transparent')"
           [style.background-color]="(inboxVisibility && !islargeDeviceWidth ? darkTheme.isEnabled$.value && !islargeDeviceWidth ? '#134482' : '#E4EBFF' : 'transparent')"

      >
        <img class="inbox-icon" [src]="darkTheme.getIcon({iconName: 'Inbox', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        <div class="inbox-modifiers" *ngIf="(notificationBadge$ | async) > 0">
          <img class="inbox-badge" [src]="'./assets/Inbox Notification (Red).svg' | resolveAsset">
          <div class="inbox-number">{{ notificationBadge$ | async }}</div>
          <img class="inbox-front" [src]="darkTheme.getIcon({iconName: 'Inbox Bottom', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        </div>
      </div>



      <div *ngIf="user && !isStaff || islargeDeviceWidth" class="inbox-wrapper-sm" (click)="inboxClick()">
        <img [@inboxAppearance] *ngIf="!isInboxClicked" class="inbox-icon" [src]="darkTheme.getIcon({iconName: 'Inbox', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        <img [@arrowAppearance] *ngIf="isInboxClicked" class="inbox-icon inbox-icon-arrow" [src]="darkTheme.getIcon({iconName: 'SP Arrow', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        <div  [@inboxAppearance] class="inbox-modifiers" *ngIf="(notificationBadge$ | async) > 0 && !isInboxClicked">
          <img class="inbox-badge" [src]="'./assets/Inbox Notification (Red).svg' | resolveAsset">
          <div class="inbox-number">{{ notificationBadge$ | async }}</div>
          <img class="inbox-front" [src]="darkTheme.getIcon({iconName: 'Inbox Bottom', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        </div>
      </div>

      <!--<div *ngIf="false" class="inbox-wrapper" (click)="inboxClick()"-->
      <!--[style.background-color]="(inboxVisibility?'#E4EBFF':'transparent')"-->
      <!--[style.background-color]="(inboxVisibility ? darkTheme.isEnabled$.value ? '#134482' : '#E4EBFF' : 'transparent')"-->

      <!--&gt;-->
      <!--<img class="inbox-icon" [src]="darkTheme.getIcon({iconName: 'Inbox', darkFill: 'White', lightFill: 'Navy'}) | resolveAsset">-->
      <!--<div class="inbox-modifiers" *ngIf="(notificationBadge$ | async) > 0">-->
      <!--<img class="inbox-badge" [src]="'./assets/Inbox Notification (Red).svg' | resolveAsset">-->
      <!--<div class="inbox-number">{{ notificationBadge$ | async }}</div>-->
      <!--<img class="inbox-front" [src]="darkTheme.getIcon({iconName: 'Inbox Bottom', darkFill: 'White', lightFill: 'Navy'}) | resolveAsset">-->
      <!--</div>-->
      <!--</div>-->
      <!--<div *ngIf="isStaff" class="support-wrapper global-opacity-icons" (click)="openSupport()">-->
      <!--<img class="support" [src]="'./assets/Support (Blue).png' | resolveAsset">-->
      <!--</div>-->
      <!--<div class="admin-view-wrapper global-opacity-icons" (click)="router.navigateByUrl('/select-profile')"  *ngIf="showSwitchButton">-->
      <!--<img class="admin-view" [src]="'./assets/Switch Account (Blue).png' | resolveAsset" alt="">-->
      <!--</div>-->

      <div
        (click)="showOptions($event)"
        class="options-wrapper global-opacity-icons"
        [style.background-color]="(isOpenSettings ? darkTheme.isEnabled$.value ? '#134482' : '#E4EBFF' : 'transparent')"
      >
        <img class="options" [src]="getIcon('Settings', 'White', 'Blue-Gray') | resolveAsset">
      </div>
    </div>
  </div>

  <div *ngIf="isStaff" class="teacherNav-mobile">
    <div class="teacherNav-mobile-wrapper">
      <div *ngFor="let button of buttons" class="teacherNav_tab">
        <ng-container *ngIf="isStaff">
          <app-nav-button
            [selected]="tab === button.route"
            [content]="button.title"
            [icon]="button.imgUrl"
            (onClick)="updateTab(button.route)">
          </app-nav-button>
        </ng-container>
      </div>
    </div>
  </div>
  <div [style.display]="(isStaff && showNav)?'':'none'" class="divider"></div>
</div>
