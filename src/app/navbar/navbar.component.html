<div class="host" [style.position]="isStaff ? 'fixed' : 'static'" [style.top]="schools.length > 1 ? '50px' : 0">
  <!--<div *ngIf="!(isProcess$ | async).active" class="static-loading" #staticLoading><div class="static-loading"></div></div>-->
  <!--<ng-progress [color]="'#04CD33'" [spinner]="false" [fixed]="true" [speed]="200" [thick]="true"></ng-progress>-->
  <div *ngIf="showNav && !isHallMonitorRoute && showNav && !isMyRoomRoute || showNav && !islargeDeviceWidth" class="bar">
    <div class="heading grow">
      <app-smartpass-logo></app-smartpass-logo>
    </div>
    <div #navButtonsContainer class="nav-buttons" *ngIf="!hideButtons">

      <div *ngIf="isStaff && !user.isAssistant()" class="teacherNav">
        <div *ngFor="let button of buttons" class="teacherNav_tab">
          <ng-container *ngIf="hasRoles(button.requiredRoles)">
            <div
                 #tabRef
                 [style.transition]="'transform .4s ease'"
                 (mousedown)="tabRef.style.transform = 'scale(.96)'"
                 (mouseup)="tabRef.style.transform = 'unset'">
              <div>
              </div>
              <app-nav-button
                      [selected]="tab === button.route"
                      [content]="button.title"
                      [icon]="button.imgUrl"
                      (onClick)="selectTab(tabRef, navButtonsContainer); updateTab(button.route)">
              </app-nav-button>
            </div>
          </ng-container>
        </div>
        <div class="selected-tab-pointer" [style.left]="pointerTopSpace"></div>
      </div>

      <div *ngIf="user.isAssistant() && effectiveUser?.roles" class="teacherNav">
        <!--{{buttons.length}}-->
        <div *ngFor="let button of buttons" class="teacherNav_tab">
          <ng-container *ngIf="buttonVisibility(button)">
            <app-nav-button
              [selected]="tab === button.route"
              [content]="button.title"
              [icon]="button.imgUrl"
              (onClick)="updateTab(button.route)">
            </app-nav-button>
          </ng-container>
        </div>
      </div>
    </div>
    <div class="user-info">
      <div class="ds-mx-10" style="cursor: pointer;" *ngIf="user.isAssistant(); else notAssistant" #target (click)="showTeaches(target)">
        <div class="acting-behalf" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white : '#7F879D'})">Acting on Behalf Of:</div>
        <div class="name" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white : '#7F879D'})">
          <span>
            {{ effectiveUser?.user.display_name }}
          </span>
          <img width="10" class="ds-ml-5" [src]="getIcon('Chevron Down', 'White', 'Navy')" alt="Chevron Down.svg">
        </div>
      </div>
      <ng-template #notAssistant>
        <div class="name" [style.color]="darkTheme.getColor({dark: '#FFFFFF', white : '#7F879D'})">
          <span>
            {{ user?user.display_name:'' }}
          </span>
        </div>
      </ng-template>

      <div *ngIf="user && islargeDeviceWidth" class="inbox-wrapper" (click)="inboxClick()"
           [style.background-color]="(inboxVisibility && !islargeDeviceWidth?'#E4EBFF':'transparent')"
           [style.background-color]="(inboxVisibility && !islargeDeviceWidth ? darkTheme.isEnabled$.value && !islargeDeviceWidth ? '#134482' : '#E4EBFF' : 'transparent')"

      >
        <app-icon-button [srcString]="'Inbox'" [size]="20" (clickEvent)="inboxClick()"></app-icon-button>
        <div class="inbox-modifiers" *ngIf="(notificationBadge$ | async) > 0">
          <img class="inbox-badge" [src]="'./assets/Inbox Notification (Red).svg' | resolveAsset">
          <div class="inbox-number">{{ notificationBadge$ | async }}</div>
          <img class="inbox-front" [src]="darkTheme.getIcon({iconName: 'Inbox Bottom', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        </div>
      </div>

      <div *ngIf="user && !isStaff || islargeDeviceWidth" class="inbox-wrapper-sm" (click)="inboxClick()">
<!--        <img [@inboxAppearance] *ngIf="!isInboxClicked" class="inbox-icon" [src]="darkTheme.getIcon({iconName: 'Inbox', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">-->
        <app-icon-button  [@inboxAppearance] *ngIf="!isInboxClicked" [srcString]="'Inbox'" [size]="20" (clickEvent)="inboxClick()"></app-icon-button>
        <img [@arrowAppearance] *ngIf="isInboxClicked" class="inbox-icon inbox-icon-arrow" [src]="darkTheme.getIcon({iconName: 'SP Arrow', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        <div  [@inboxAppearance] class="inbox-modifiers" *ngIf="(notificationBadge$ | async) > 0 && !isInboxClicked">
          <img class="inbox-badge" [src]="'./assets/Inbox Notification (Red).svg' | resolveAsset">
          <div class="inbox-number">{{ notificationBadge$ | async }}</div>
          <img class="inbox-front" [src]="darkTheme.getIcon({iconName: 'Inbox Bottom', darkFill: 'White', lightFill: 'Blue-Gray'}) | resolveAsset">
        </div>
      </div>

      <div class="options-wrapper">
        <app-icon-button  [srcString]="'Settings'" [size]="20" (clickEvent)="showOptions($event)"></app-icon-button>

        <!--<img class="options" [src]="getIcon('Settings', 'White', 'Blue-Gray') | resolveAsset">-->
      </div>
    </div>
  </div>

  <div *ngIf="isStaff" class="teacherNav-mobile" [style.background-color]="darkTheme.getBackground('low', false)">
    <div class="teacherNav-mobile-wrapper">
      <div *ngFor="let button of buttons" class="teacherNav_tab">
        <ng-container *ngIf="isStaff">
          <app-nav-button
            [selected]="tab === button.route"
            [content]="button.title"
            [icon]="button.imgUrl"
            (onClick)="updateTab(button.route)">
          </app-nav-button>
        </ng-container>
      </div>
    </div>
  </div>
  <!--<div [style.display]="(isStaff && showNav)?'':'none'" class="divider"></div>-->
</div>



<svg style="display: none;">
  <defs>
    <symbol id="SP Arrow">
        <g id="Group-2" transform="translate(14.000000, 0.000000)" fill="currentColor">
            <rect id="Rectangle" x="27" y="32" width="96" height="118" rx="16.969697"></rect>
            <path d="M96,23.6238095 L42.2459627,23.6238095 C28.9911287,23.6238095 18.2459627,34.3689755 18.2459627,47.6238095 L18.2459627,123 L16.969697,123 C7.59759212,123 -6.28010944e-14,115.402408 -6.39488462e-14,106.030303 L-6.39488462e-14,16.969697 C-6.5096598e-14,7.59759212 7.59759212,-1.2489227e-14 16.969697,-1.42108547e-14 L79.030303,-1.42108547e-14 C88.4024079,-1.59324824e-14 96,7.59759212 96,16.969697 L96,23.6238095 Z" id="Combined-Shape"></path>
        </g>
    </symbol>
    <symbol id="Walking">
      <g stroke="none" stroke-width="1" fill="currentColor" fill-rule="evenodd">
        <g id="icons8-students_filled" transform="translate(2.000000, 2.000000)" fill-rule="nonzero">
          <path d="M47.2134689,0 C39.108694,0 32.5400446,6.57948862 32.5400446,14.6976376 C32.5400446,22.8157867 39.108694,29.3952753 47.2134689,29.3952753 C55.3182439,29.3952753 61.8868932,22.8157867 61.8868932,14.6976376 C61.8868932,6.57948862 55.3182439,0 47.2134689,0 Z M17.9583292,28.6603934 C14.6338829,28.5226031 11.45846,30.8191089 10.2547814,34.4475882 L0.625346699,66.5986706 C-0.291742321,69.1133453 -0.119788129,71.8002557 1.08389121,73.9474894 C2.15000646,75.8535908 3.91540429,77.1281493 5.94446302,77.5300386 L18.6002915,80.4695661 C19.0015187,80.5614264 19.4715261,80.630323 19.8842161,80.6532866 C19.6549439,78.9998024 19.5861637,77.1625977 19.975925,75.2335327 C20.6064245,71.4672631 26.7279922,44.2307033 28.8716885,34.7231689 L28.8716885,34.5394485 C29.0665692,33.8734632 29.4907251,33.000791 30.1556131,32.1510824 C29.914878,32.0707039 29.754386,31.9329136 29.5136508,31.8755016 L19.4256716,28.9359741 C18.9442013,28.8211503 18.4283366,28.6833599 17.9583292,28.6603934 Z M35.6581473,32.3348028 C32.6202906,32.3348028 31.7146645,35.3661906 31.7146645,35.3661906 C29.582434,44.816313 23.5181806,72.041391 22.9106099,75.6928339 C22.0852298,79.8150627 23.1742737,83.1564795 24.7447879,85.9811802 L17.6832025,112.436928 C17.6832025,112.436928 5.89860857,129.51145 2.55123364,134.391524 C0.120947738,138.04297 -1.70176742,142.337435 2.55123364,145.690333 C7.41180545,149.341779 11.0343071,144.484668 13.464593,141.740343 C15.5968264,139.306047 25.0657691,126.445614 27.496055,123.092715 C29.3187702,120.956966 30.1900047,119.131243 30.7975755,117.30552 C31.3707576,116.145786 34.5691033,107.235343 35.933274,103.434625 C44.9322093,117.454793 57.9434105,137.641081 60.6029686,141.189182 C64.2483989,146.069256 67.6301625,148.239456 72.8002526,145.506613 C77.0532536,143.072316 76.4227542,137.618114 73.9924683,133.656642 C71.5621824,129.69517 43.5451128,84.2358358 43.5451128,84.2358358 L48.7725203,62.3730998 C48.7725203,62.3730998 52.1084323,68.7229378 53.6330921,71.4672631 C54.5501811,72.6844127 55.1462889,73.2815042 57.5765748,74.4986508 C60.0068608,76.0258265 66.6786848,79.746166 70.3241122,81.5718889 C73.6714872,83.0990646 77.947414,83.7076409 79.7701291,80.6532866 C81.283326,77.300388 79.1740213,73.5800485 76.7437354,72.6614461 C74.0039312,71.4442995 61.7951843,64.1184442 61.7951843,64.1184442 C61.7951843,64.1184442 55.6965424,48.7663031 52.3491674,41.1533854 C49.3113108,34.1490439 46.9154165,32.3348028 42.3528971,32.3348028 L35.6581473,32.3348028 Z M118.654704,35.3661906 C111.363846,35.3661906 105.448622,41.2911758 105.448622,48.5940645 C105.448622,55.8969532 111.363846,61.8219384 118.654704,61.8219384 C125.945561,61.8219384 131.860785,55.8969532 131.860785,48.5940645 C131.860785,41.2911758 125.945561,35.3661906 118.654704,35.3661906 Z M97.0114027,61.3626372 C94.4206277,61.3626372 90.8783692,62.46496 88.6658926,67.7928537 C87.9895387,69.6415402 86.8546433,73.4192945 85.6394989,77.4381784 C84.6765554,80.6188383 83.7136119,83.7765346 83.0716496,85.7055995 C81.9711428,88.8288475 82.0284601,91.5272427 83.1633585,93.69744 C83.874104,95.0638617 85.3987637,96.9125482 88.7576015,97.8311506 C90.2707984,98.1641432 91.6235062,98.6578927 92.7010843,99.0253337 C93.4462184,99.2779508 94.0881807,99.4616712 94.5352624,99.5764951 C95.4523514,99.8176274 96.2662686,99.943936 97.1031116,99.943936 C97.6762937,99.943936 98.5475283,99.8061457 99.4875431,99.4846348 C99.0519273,97.7737387 98.9716812,95.8906039 99.3958342,93.7893002 C99.6938896,91.7454115 101.53953,83.8798766 103.88957,73.7637689 C104.554461,70.8931381 105.127641,68.2521548 105.540331,66.4149501 C105.735211,65.6456199 106.124976,64.9222228 106.640837,64.2103045 C105.930095,63.7395215 105.070323,63.3146686 104.164697,63.0161214 C104.10738,63.0046396 103.041264,62.671647 100.221214,61.8219384 C99.1207075,61.5119093 98.0087378,61.3626372 97.0114027,61.3626372 Z M111.134574,64.7614659 C109.002343,64.7614659 108.383307,67.149832 108.383307,67.149832 C106.858647,73.8556292 102.536866,91.9061654 102.23881,94.3404617 C101.619777,97.2225773 102.491011,99.6453917 103.614444,101.781141 L98.2953273,121.439231 C98.2953273,121.439231 89.5371272,134.13891 87.1068413,137.790353 C85.2841261,140.534678 84.0689847,143.531618 87.1068413,145.965914 C90.4542162,148.710239 93.1710917,145.03583 94.9938069,143.210107 C96.5184666,141.384384 103.499809,131.773508 105.63204,129.339211 C106.847184,127.812036 107.4089,126.33079 108.016471,125.11364 C108.291598,124.29838 111.054328,118.419325 112.326789,115.560176 C119.124711,126.135585 128.38731,140.557642 130.118316,142.934526 C132.858121,146.287425 135.368652,148.193526 139.01408,146.057774 C142.051936,144.232051 141.753884,140.259098 139.931169,137.514772 C138.108454,134.471903 117.187361,100.678818 117.187361,100.678818 L120.488882,88.0939657 C120.488882,88.0939657 122.942096,92.7903194 124.157238,94.6160424 C124.764808,95.5346447 125.383845,95.8102254 126.908505,96.7288278 C128.73122,97.6474301 135.999149,101.298876 138.738953,102.516023 C141.169239,103.733172 144.218561,104.100613 145.433703,101.964861 C146.9469,99.8291122 145.147113,97.0962687 143.324398,96.1776664 C141.192168,95.259064 129.934899,89.4718692 129.934899,89.4718692 C129.934899,89.4718692 125.670435,76.8525686 123.240149,71.3754028 C121.107918,65.8867552 119.34252,64.7614659 115.995145,64.7614659 L111.134574,64.7614659 Z" id="Shape"></path>
        </g>
      </g>
    </symbol>
    <symbol id="Room">
      <g stroke="none" stroke-width="1" fill="currentColor"  fill-rule="evenodd">
        <g id="icons8-classroom" transform="translate(3.000000, 6.000000)" fill-rule="nonzero">
          <path d="M18.770985,5.571301e-15 C8.40405623,0 0,8.42518698 0,18.8181818 C0,29.2111767 8.40405623,37.6363636 18.770985,37.6363636 C29.1379137,37.6363636 37.54197,29.2111767 37.54197,18.8181818 C37.54197,8.42518698 29.1379137,0 18.770985,0 L18.770985,5.571301e-15 Z M50.0559599,6.27272727 L50.0559599,18.8181818 L125.1399,18.8181818 L125.1399,87.8181818 L50.0559599,87.8181818 L50.0559599,93.0372854 C49.9442785,93.7146862 49.9442785,94.4058725 50.0559599,95.0832734 L50.0559599,100.363636 L131.396895,100.363636 L137.65389,100.363636 C139.910387,100.395629 142.009267,99.2071004 143.146829,97.2531612 C144.28439,95.299222 144.28439,92.8825962 143.146829,90.928657 C142.009267,88.9747178 139.910387,87.7861891 137.65389,87.8181818 L137.65389,12.5454545 C137.653544,9.08126641 134.852395,6.27307364 131.396895,6.27272727 L50.0559599,6.27272727 Z M12.51399,50.1818182 C5.60001052,50.1818182 0,55.7959091 0,62.7272727 L0,100.363636 L37.54197,100.363636 L37.54197,69 C37.54197,65.5374545 40.3451037,62.7272727 43.7989649,62.7272727 L50.0559599,62.7272727 L75.0839399,62.7272727 C77.340437,62.7592655 79.4393175,61.5707368 80.576879,59.6167976 C81.7144404,57.6628584 81.7144404,55.2462325 80.576879,53.2922933 C79.4393175,51.3383541 77.340437,50.1498255 75.0839399,50.1818182 L50.0559599,50.1818182 L31.284975,50.1818182 L12.51399,50.1818182 Z M12.51399,112.909091 C5.60270416,112.909091 0,118.525882 0,125.454545 C0,132.383209 5.60270416,138 12.51399,138 C19.4252758,138 25.02798,132.383209 25.02798,125.454545 C25.02798,118.525882 19.4252758,112.909091 12.51399,112.909091 Z M50.0559599,112.909091 C43.1446741,112.909091 37.54197,118.525882 37.54197,125.454545 C37.54197,132.383209 43.1446741,138 50.0559599,138 C56.9672458,138 62.5699499,132.383209 62.5699499,125.454545 C62.5699499,118.525882 56.9672458,112.909091 50.0559599,112.909091 Z M87.5979299,112.909091 C80.6866441,112.909091 75.0839399,118.525882 75.0839399,125.454545 C75.0839399,132.383209 80.6866441,138 87.5979299,138 C94.5092157,138 100.11192,132.383209 100.11192,125.454545 C100.11192,118.525882 94.5092157,112.909091 87.5979299,112.909091 Z M125.1399,112.909091 C118.228614,112.909091 112.62591,118.525882 112.62591,125.454545 C112.62591,132.383209 118.228614,138 125.1399,138 C132.051186,138 137.65389,132.383209 137.65389,125.454545 C137.65389,118.525882 132.051186,112.909091 125.1399,112.909091 Z" id="Shape"></path>
        </g>
      </g>
    </symbol>
  </defs>
</svg>
