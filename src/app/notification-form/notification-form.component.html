<div  [ngClass]="isIOSTablet ? 'ios-notif-wrapper' : 'notif-wrapper'">
  <div class="notif-header" [style.background-image]="'radial-gradient(circle at 73% 71%, #DA2370,#FB434A)'">
    <img draggable="false" [ngClass]="isIOSTablet ? 'ios-back-button': 'back-button'" [src]="'./assets/Back Button (Light-Gray).svg' | resolveAsset" alt="Notification" (click)="dialogRef.close()">
    <div class="header-title">
        <img draggable="false" class="header-icon" [src]="'./assets/Notifications (White).svg' | resolveAsset">
      <div class="ds-dialog-title-white">
        Notifications
      </div>
    </div>
  </div>
  <div class="notif-content" *ngIf="isDisabledNotif">
      <div class="setting" *ngFor="let setting of settings">
        <div class="setting-content">
            <div class="ds-dialog-subtitle" style="margin-bottom: 10px">{{ setting.category_name }}</div>
            <div class="controls" *ngFor="let notification of setting.notifications">
                <div class="control-title ds-cell-text-2">
                  {{ notification.name }} <br>
                  <!--<span class="control-subtitle ds-cell-description-text" *ngIf="control.controlSubtitle"> {{ control.controlSubtitle }} </span>-->
                </div>
                <div class="control-toggle">
                  <app-toggle-input
                     [delimiter]="false"
                     [controlSize]="'small'"
                     [form]="notifForm"
                     [controlName]="notification.id"
                     (pushOutValue)="changeForm({value: $event, id: notification.id})"
                  ></app-toggle-input>
                </div>
            </div>
        </div>
        <mat-divider></mat-divider>
      </div>

    <div class="test-notif" *ngIf="loaded">
      <div class="test-header">Having issues with notifications?</div>
      <div class="info">Check out our <a href="https://www.smartpass.app/notifications" target="_blank">support guides</a> for more help.</div>
      <app-gradient-button
        [size]="'medium'"
        [textColor]="'#1F195E'"
        [leftIcon]="'./assets/Latter (Navy).svg'"
        [gradient]="'#F4F4F4, #F4F4F4'"
        (buttonClick)="send()"
      >Send test notification</app-gradient-button>
    </div>
  </div>
    <div class="notif-empty-state" *ngIf="!isDisabledNotif && !isSafari">
        <img draggable="false" [src]="'./assets/emptyStates/notificationsEmpty.svg' | resolveAsset">
        <div class="info">
            <div class="title ds-empty-text-title">Notifications Disabled</div>
            <p class="descriptions ds-empty-text-info">
                Notifications are currently disabled by your browser settings.
                If youâ€™d like help on how to enable them, click
              <a *ngIf="user.isStudent()" class="external-link" href="https://www.smartpass.app/documentation/student-notifications" target="_blank">here</a>
              <a *ngIf="user.isTeacher()" class="external-link" href="https://www.smartpass.app/documentation/teacher-notifications" target="_blank">here</a>.
            </p>
        </div>
    </div>
  <div class="notif-empty-state" *ngIf="!isDisabledNotif && isSafari">
    <img draggable="false" [src]="'./assets/Safari (Blue-Gray).svg' | resolveAsset">
    <div class="info">
      <div class="title ds-empty-text-title">Notifications Not Available</div>
      <p class="descriptions ds-empty-text-info">
        SmartPass notifications are not available on Safari.
        Please use Chrome or Firefox browsers for notifications.
      </p>
    </div>
  </div>
</div>

<div [ngClass]="isIOSTablet ? 'ios-back-button-wrapper' : 'back-button-wrapper'" (click)="dialogRef.close()">
  <img [ngClass]="isIOSTablet ? 'ios-back-button-bottom': 'back-button-bottom'" [src]="'./assets/Back Button (Light-Gray).svg' | resolveAsset">
</div>
